{{define "admin_vmbr"}}
  {{template "admin_base" .}}
{{end}}

{{define "admin_vmbr_section"}}
  <div class="container mt-4">

  {{if .Error}}
  {{template "notification" (dict 
    "Type" "danger" 
    "Title" (T "Common.Error") 
    "Message" .Error 
    "Icon" "fas fa-exclamation-triangle" 
    "Dismissible" true 
    "Light" false 
    "Action" (dict 
      "Link" (withLang "/admin/vmbr" $.Lang) 
      "Text" (T "Common.TryAgain") 
      "Icon" "fas fa-rotate-right" 
      "Type" "light")
  )}}
  {{else}}
  <div class="content mb-5">
    <h1 class="title is-4"><span class="icon"><i class="fas fa-network-wired"></i></span>&nbsp;{{T "Admin.VMBR.Title"}}</h1>
    <p class="subtitle is-6 has-text-grey">{{T "Admin.VMBR.Description"}}</p>
  </div>
  {{if .VMBRs}}
  <div class="table-container">
    <table class="table is-fullwidth is-striped is-hoverable is-narrow">
      <thead>
        <tr>
          <th><span class="icon is-small"><i class="fas fa-network-wired"></i></span>&nbsp;{{T "Admin.VMBR.Title"}}</th>
          <th>{{T "Admin.VMBR.Header.Node"}}</th>
          <th>{{T "Admin.VMBR.Header.Description"}}</th>
          <th class="has-text-right">{{T "Common.Actions"}}</th>
        </tr>
      </thead>
      <tbody>
        {{range .VMBRs}}
        {{$name := index . "name"}}
        <tr>
          <td>{{$name}}</td>
          <td>{{index . "node"}}</td>
          <td>{{index . "description"}}</td>
          <td class="has-text-right">
            <form method="POST" action="{{withLang "/admin/vmbr/toggle" $.Lang}}" class="is-inline">
              <input type="hidden" name="csrf_token" value="{{$.CSRFToken}}">
              <input type="hidden" name="vmbr" value="{{$name}}">
              <input type="hidden" name="action" value="{{if index $.EnabledVMBRs $name}}disable{{else}}enable{{end}}">
              <button type="submit" class="button is-small {{if index $.EnabledVMBRs $name}}is-success{{else}}is-light{{end}}"
                aria-label="{{if index $.EnabledVMBRs $name}}{{T "Common.Disable"}}{{else}}{{T "Common.Enable"}}{{end}} {{$name}}"
                title="{{if index $.EnabledVMBRs $name}}{{T "Common.Disable"}}{{else}}{{T "Common.Enable"}}{{end}} {{$name}}">
                <span class="icon is-small">
                  {{if index $.EnabledVMBRs $name}}
                    <i class="fas fa-toggle-on"></i>
                  {{else}}
                    <i class="fas fa-toggle-off"></i>
                  {{end}}
                </span>
                <span>{{if index $.EnabledVMBRs $name}}{{T "Common.Disable"}}{{else}}{{T "Common.Enable"}}{{end}}</span>
              </button>
            </form>
          </td>
        </tr>
        {{end}}
      </tbody>
    </table>
  </div>
  {{else}}
  {{template "notification" (dict 
    "Type" "warning" 
    "Message" (T "Admin.VMBR.NoVMBRs") 
    "Icon" "fas fa-circle-info" 
    "Dismissible" false 
  )}}
  {{end}}
  {{end}}
  </div>
{{end}}

