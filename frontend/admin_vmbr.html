{{define "admin_vmbr"}}
  {{template "admin_base" .}}
{{end}}

{{define "admin_vmbr_section"}}
  <div class="container mt-4">

  {{if .Error}}
  <div class="notification is-danger">
    <p><strong>{{index .t "Common.Error"}}:</strong> {{.Error}}</p>
    <a href="/admin/vmbr" class="button is-small is-light mt-2">
      <span>{{index .t "Common.TryAgain"}}</span>
    </a>
  </div>
  {{else}}
  <div class="content mb-5">
    <h1 class="title is-4"><span class="icon"><i class="fas fa-network-wired"></i></span>&nbsp;{{index .t "Admin.VMBR.Title"}}</h1>
    <p class="subtitle is-6 has-text-grey">{{index .t "Admin.VMBR.Description"}}</p>
  </div>
  {{if .VMBRs}}
  <div class="table-container">
    <table class="table is-fullwidth is-striped is-hoverable is-narrow">
      <thead>
        <tr>
          <th><span class="icon is-small"><i class="fas fa-network-wired"></i></span>&nbsp;{{index $.t "Admin.VMBR.Title"}}</th>
          <th>{{index $.t "Admin.VMBR.Header.Node"}}</th>
          <th>{{index $.t "Admin.VMBR.Header.Description"}}</th>
          <th class="has-text-right">{{index $.t "Common.Actions"}}</th>
        </tr>
      </thead>
      <tbody>
        {{range .VMBRs}}
        {{$name := index . "name"}}
        <tr>
          <td>{{$name}}</td>
          <td>{{index . "node"}}</td>
          <td>{{index . "description"}}</td>
          <td class="has-text-right">
            <form method="POST" action="/admin/vmbr/toggle" class="is-inline">
              <input type="hidden" name="csrf_token" value="{{$.CSRFToken}}">
              <input type="hidden" name="vmbr" value="{{$name}}">
              <input type="hidden" name="action" value="{{if index $.EnabledVMBRs $name}}disable{{else}}enable{{end}}">
              <button type="submit" class="button is-small {{if index $.EnabledVMBRs $name}}is-success{{else}}is-light{{end}}"
                aria-label="{{if index $.EnabledVMBRs $name}}{{index $.t "Common.Disable"}}{{else}}{{index $.t "Common.Enable"}}{{end}} {{$name}}"
                title="{{if index $.EnabledVMBRs $name}}{{index $.t "Common.Disable"}}{{else}}{{index $.t "Common.Enable"}}{{end}} {{$name}}">
                <span class="icon is-small">
                  {{if index $.EnabledVMBRs $name}}
                    <i class="fas fa-toggle-on"></i>
                  {{else}}
                    <i class="fas fa-toggle-off"></i>
                  {{end}}
                </span>
                <span>{{if index $.EnabledVMBRs $name}}{{index $.t "Common.Disable"}}{{else}}{{index $.t "Common.Enable"}}{{end}}</span>
              </button>
            </form>
          </td>
        </tr>
        {{end}}
      </tbody>
    </table>
  </div>
  {{else}}
  <div class="notification is-warning">
    {{index .t "Admin.VMBR.NoVMBRs"}}
  </div>
  {{end}}
  {{end}}
  </div>
{{end}}

