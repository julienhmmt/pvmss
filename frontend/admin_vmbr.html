{{define "admin_vmbr"}}
  {{template "admin_base" .}}
{{end}}

{{define "admin_vmbr_section"}}
  <div class="container mt-4">

  {{if .Error}}
  <div class="notification is-danger">
    <p><strong>{{index .t "Common.Error"}}:</strong> {{.Error}}</p>
    <a href="/admin/vmbr" class="button is-small is-light mt-2">
      <span>{{index .t "Common.TryAgain"}}</span>
    </a>
  </div>
  {{else}}
  <div class="card admin-card">
    <header class="card-header brand-header is-align-items-center">
      <p class="card-header-title">
        <span class="icon"><i class="fas fa-network-wired"></i></span>&nbsp;{{index .t "Admin.VMBR.Title"}}
      </p>
    </header>
    <div class="card-content">
      <!-- Description integrated into card -->
      <p class="help mb-2">
        <span class="icon is-small has-text-grey-light mr-1"><i class="fas fa-info-circle"></i></span>
        {{index .t "Admin.VMBR.Description"}}
      </p>
      <hr class="my-3">
      {{if .VMBRs}}
      <div class="table-container">
        <table class="table is-fullwidth is-striped is-hoverable is-narrow">
          <thead>
            <tr>
              <th scope="col"><span class="icon-text"><span class="icon"><i class="fas fa-toggle-on"></i></span>
                  <span>{{index .t "Admin.VMBR.Header.Enabled"}}</span></span></th>
              <th scope="col"><span class="icon-text"><span class="icon"><i class="fas fa-server"></i></span>
                  <span>{{index .t "Admin.VMBR.Header.Node"}}</span></span></th>
              <th scope="col"><span class="icon-text"><span class="icon"><i class="fas fa-network-wired"></i></span>
                  <span>{{index .t "Admin.VMBR.Header.Name"}}</span></span></th>
              <th scope="col"><span class="icon-text"><span class="icon"><i class="fas fa-info-circle"></i></span>
                  <span>{{index .t "Admin.VMBR.Header.Description"}}</span></span></th>
            </tr>
          </thead>
          <tbody>
            {{range $i, $vmbr := .VMBRs}}
            {{$name := index $vmbr "name"}}
            <tr>
              <td>
                <form method="POST" action="/admin/vmbr/toggle" class="is-inline">
                  <input type="hidden" name="csrf_token" value="{{$.CSRFToken}}">
                  <input type="hidden" name="vmbr" value="{{$name}}">
                  <input type="hidden" name="action"
                    value="{{if index $.EnabledVMBRs $name}}disable{{else}}enable{{end}}">
                  <button type="submit"
                    class="button is-small {{if index $.EnabledVMBRs $name}}is-success{{else}}is-light{{end}}"
                    aria-label="{{if index $.EnabledVMBRs $name}}{{index $.t "Common.Disable"}}{{else}}{{index $.t "Common.Enable"}}{{end}} {{$name}}"
                    title="{{if index $.EnabledVMBRs $name}}{{index $.t "Common.Disable"}}{{else}}{{index $.t "Common.Enable"}}{{end}} {{$name}}">
                    <span class="icon is-small">
                      {{if index $.EnabledVMBRs $name}}
                      <i class="fas fa-toggle-on"></i>
                      {{else}}
                      <i class="fas fa-toggle-off"></i>
                      {{end}}
                    </span>
                  </button>
                </form>
              </td>
              <td>{{index $vmbr "node"}}</td>
              <td>{{$name}}</td>
              <td>{{index $vmbr "description"}}</td>
            </tr>
            {{end}}
          </tbody>
        </table>
      </div>
      {{else}}
      <div class="notification is-warning">
        {{index .t "Admin.VMBR.NoVMBRs"}}
      </div>
      {{end}}
    </div>
  </div>
  {{end}}
  </div>
{{end}}
