{{define "notification"}}
{{/*
  Reusable notification component with improved responsiveness
  Usage: {{template "notification" (dict "Type" "success" "Message" "Operation completed successfully" "Icon" "fas fa-check" "Dismissible" true)}}
*/}}
<div class="notification is-{{or .Type "info"}} {{if ne .Light false}}is-light{{end}} {{.ExtraClasses}}" role="alert"
     {{if .Live}}aria-live="{{.Live}}"{{else}}aria-live="polite"{{end}}>
  <div class="notification-content">
    <!-- Icon and Text Container -->
    <div class="notification-body">
      {{if .Icon}}
      <div class="notification-icon">
        <span class="icon has-text-{{if ne .Light false}}{{or .Type "info"}}{{else}}white{{end}}">
          <i class="{{.Icon}}"></i>
        </span>
      </div>
      {{end}}
      <div class="notification-text">
        {{if .Title}}
        <div>
          <strong>{{.Title}}</strong>
          {{if .Message}}<p class="mt-2 mb-0">{{.Message}}</p>{{end}}
        </div>
        {{else}}
        {{.Message}}
        {{end}}
      </div>
    </div>
    
    <!-- Action and Dismiss Container -->
    {{if or .Action .Dismissible}}
    <div class="notification-actions">
      {{if .Action}}
      <div class="notification-action">
        {{if .Action.Link}}
        <a href="{{.Action.Link}}" class="button is-{{or .Action.Type "primary"}} is-small">
          {{if .Action.Icon}}<span class="icon"><i class="{{.Action.Icon}}"></i></span>{{end}}
          <span>{{.Action.Text}}</span>
        </a>
        {{else if .Action.Form}}
        <form method="{{or .Action.Form.Method "POST"}}" action="{{.Action.Form.Action}}" class="is-inline">
          {{range .Action.Form.Fields}}
          <input type="hidden" name="{{.Name}}" value="{{.Value}}">
          {{end}}
          <button type="submit" class="button is-{{or $.Action.Type "primary"}} is-small">
            {{if $.Action.Icon}}<span class="icon"><i class="{{$.Action.Icon}}"></i></span>{{end}}
            <span>{{$.Action.Text}}</span>
          </button>
        </form>
        {{end}}
      </div>
      {{end}}
      {{if .Dismissible}}
      <div class="notification-dismiss">
        <button class="delete" 
                aria-label="Dismiss notification" 
                data-action="dismiss" 
                data-target="notification"
                type="button">
          <span class="visually-hidden">Dismiss notification</span>
        </button>
      </div>
      {{end}}
    </div>
    {{end}}
  </div>
</div>
{{end}}
