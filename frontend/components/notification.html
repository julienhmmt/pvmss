{{define "notification"}}
{{/* 
  Reusable notification component
  Usage: {{template "notification" (dict "Type" "success" "Message" "Operation completed successfully" "Icon" "fas fa-check" "Dismissible" true)}}
*/}}
<div class="notification is-{{or .Type "info"}} is-light{{if .Dismissible}} is-dismissible{{end}}" role="alert" 
     {{if .Live}}aria-live="{{.Live}}"{{else}}aria-live="polite"{{end}}>
  {{if .Dismissible}}
  <button class="delete" aria-label="Close notification"></button>
  {{end}}
  <div class="level is-mobile">
    <div class="level-left">
      {{if .Icon}}
      <div class="level-item">
        <span class="icon has-text-{{or .Type "info"}}">
          <i class="{{.Icon}}"></i>
        </span>
      </div>
      {{end}}
      <div class="level-item">
        {{if .Title}}
        <div>
          <strong>{{.Title}}</strong>
          {{if .Message}}<p>{{.Message}}</p>{{end}}
        </div>
        {{else}}
        {{.Message}}
        {{end}}
      </div>
    </div>
    {{if .Action}}
    <div class="level-right">
      <div class="level-item">
        {{if .Action.Link}}
        <a href="{{.Action.Link}}" class="button is-{{or .Action.Type "primary"}} is-small">
          {{if .Action.Icon}}<span class="icon"><i class="{{.Action.Icon}}"></i></span>{{end}}
          <span>{{.Action.Text}}</span>
        </a>
        {{else if .Action.Form}}
        <form method="{{or .Action.Form.Method "POST"}}" action="{{.Action.Form.Action}}" class="is-inline">
          {{range .Action.Form.Fields}}
          <input type="hidden" name="{{.Name}}" value="{{.Value}}">
          {{end}}
          <button type="submit" class="button is-{{or $.Action.Type "primary"}} is-small">
            {{if $.Action.Icon}}<span class="icon"><i class="{{$.Action.Icon}}"></i></span>{{end}}
            <span>{{$.Action.Text}}</span>
          </button>
        </form>
        {{end}}
      </div>
    </div>
    {{end}}
  </div>
</div>
{{end}}
