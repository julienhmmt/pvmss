{{define "vmbr"}}
<div class="container mt-4">
  <h2 class="title is-4">{{index .t "Admin.VMBR.Title"}}</h2>
  <div class="notification is-light">
    {{index .t "Admin.VMBR.Description"}}
  </div>

  {{if .Error}}
    <div class="notification is-danger">
      <p><strong>{{index .t "Common.Error"}}:</strong> {{.Error}}</p>
      <a href="/admin/vmbr" class="button is-small is-light mt-2">
        <span>{{index .t "Common.TryAgain"}}</span>
      </a>
    </div>
  {{else}}
    <form method="POST" action="/admin/vmbr/update">
      <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
      
      <div class="box">
        <h3 class="subtitle is-5 mb-3">{{index .t "Admin.VMBR.Title"}}</h3>
        
        {{if .VMBRs}}
          <div class="table-container">
            <table class="table is-fullwidth is-striped is-hoverable">
              <thead>
                <tr>
                  <th><span class="icon-text"><span class="icon"><i class="fas fa-toggle-on"></i></span> <span>{{index .t "Admin.VMBR.Header.Enabled"}}</span></span></th>
                  <th><span class="icon-text"><span class="icon"><i class="fas fa-server"></i></span> <span>{{index .t "Admin.VMBR.Header.Node"}}</span></span></th>
                  <th><span class="icon-text"><span class="icon"><i class="fas fa-network-wired"></i></span> <span>{{index .t "Admin.VMBR.Header.Name"}}</span></span></th>
                  <th><span class="icon-text"><span class="icon"><i class="fas fa-info-circle"></i></span> <span>{{index .t "Admin.VMBR.Header.Description"}}</span></span></th>
                </tr>
              </thead>
              <tbody>
                {{range $i, $vmbr := .VMBRs}}
                  <tr>
                    <td>
                      <label class="checkbox">
                        <input type="checkbox" name="enabled_vmbrs" value="{{$vmbr.name}}" 
                          {{if index $.EnabledVMBRs $vmbr.name}}checked{{end}}>
                      </label>
                    </td>
                    <td>{{$vmbr.node}}</td>
                    <td>{{$vmbr.name}}</td>
                    <td>{{$vmbr.description}}</td>
                  </tr>
                {{end}}
              </tbody>
            </table>
          </div>
          
          <div class="field mt-5">
            <div class="control">
              <button type="submit" class="button is-primary">
                <span class="icon"><i class="fas fa-save"></i></span>
                <span>{{index .t "Common.Save"}}</span>
              </button>
            </div>
          </div>
        {{else}}
          <div class="notification is-warning">
            {{index .t "Admin.VMBR.NoVMBRs"}}
          </div>
        {{end}}
      </div>
    </form>
  {{end}}
</div>
{{end}}
