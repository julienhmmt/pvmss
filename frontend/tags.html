{{define "tags"}}
<div class="container mt-4">

  <!-- Tags management (list + add) -->
  <div class="card admin-card">
    <header class="card-header brand-header is-align-items-center">
      <p class="card-header-title">
        <span class="icon"><i class="fas fa-tags"></i></span>&nbsp;{{index .t "Admin.Tags.Title"}}
      </p>
    </header>
    <div class="card-content">
      <!-- Description integrated into card -->
      <p class="help mb-2">
        <span class="icon is-small has-text-grey-light mr-1"><i class="fas fa-info-circle"></i></span>
        {{index .t "Admin.Tags.Description"}}
      </p>
      <div class="divider"></div>
      <!-- Inline add form -->
      <form id="add-tag-form" action="/tags" method="POST" class="mb-3">
        <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
        <div class="field has-addons">
          <div class="control is-expanded">
            <input id="tag-input" class="input is-small" type="text" name="tag"
              placeholder='{{index .t "Admin.Tags.Placeholder"}}' required minlength="1" maxlength="50"
              pattern="[a-zA-Z0-9_-]+"
              title="Le nom du tag ne peut contenir que des lettres, chiffres, tirets et underscores">
          </div>
          <div class="control">
            <button type="submit" class="button is-primary is-small">
              <span class="icon is-small"><i class="fas fa-plus"></i></span>
              <span>{{index .t "Common.Add"}}</span>
            </button>
          </div>
        </div>
      </form>

      <!-- Tag list -->
      <div id="tags-list" class="is-flex is-flex-wrap-wrap">
        {{if .Tags}}
        {{range .Tags}}
        <div class="tag-container mr-2 mb-2">
          <span class="tag admin-badge is-rounded is-small {{if eq . " pvmss"}}is-primary is-light{{else}}is-info
            is-light{{end}}">
            {{.}}
            {{if eq . "pvmss"}}
            <span class="icon is-small ml-1 mr-1">
              <i class="fas fa-lock"></i>
            </span>
            {{else}}
            <form action="/tags/delete" method="POST" class="is-inline">
              <input type="hidden" name="csrf_token" value="{{$.CSRFToken}}">
              <input type="hidden" name="tag" value="{{.}}">
              <button type="submit" class="delete is-small ml-1" aria-label="{{index $.t " Common.Delete"}}
                {{.}}"></button>
            </form>
            {{end}}
          </span>
        </div>
        {{end}}
        {{else}}
        <div class="notification is-light is-flex is-align-items-center is-size-7">
          <span class="icon-text">
            <span class="icon has-text-grey">
              <i class="fas fa-info-circle"></i>
            </span>
            <span class="has-text-grey">Aucun tag pour le moment.</span>
          </span>
        </div>
        {{end}}
      </div>
    </div>
  </div>
</div>
{{end}}