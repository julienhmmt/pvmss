{{define "tags"}}
<div class="container mt-4">
  <h2 class="title is-4">{{index .t "Admin.Tags.Title"}}</h2>
  <div class="notification is-light">{{index .t "Admin.Tags.Description"}}</div>

  <!-- Liste des tags -->
  <div class="box">
    <h3 class="subtitle is-5 mb-4 has-text-grey-dark">
      <span class="icon-text">
        <span class="icon">
          <i class="fas fa-tags"></i>
        </span>
        <span>Tags existants</span>
      </span>
    </h3>
    <div id="tags-list" class="is-flex is-flex-wrap-wrap" style="gap: 0.75rem;">
      {{if .Tags}}
        {{range .Tags}}
          <div class="tag-container">
            <span class="tag is-rounded is-medium has-text-weight-semibold {{if eq . "pvmss"}}is-primary{{else}}is-info{{end}}">
              {{.}}
              {{if eq . "pvmss"}}
                <span class="icon is-small ml-1">
                  <i class="fas fa-lock"></i>
                </span>
              {{else}}
                <form action="/tags/delete" method="POST" class="is-inline">
                  <input type="hidden" name="csrf_token" value="{{$.CSRFToken}}">
                  <input type="hidden" name="tag" value="{{.}}">
                  <button type="submit" class="delete is-small ml-2" aria-label="delete"></button>
                </form>
              {{end}}
            </span>
          </div>
        {{end}}
      {{else}}
        <div class="notification is-light is-flex is-align-items-center" style="width: 100%;">
          <span class="icon-text">
            <span class="icon has-text-grey">
              <i class="fas fa-info-circle"></i>
            </span>
            <span class="has-text-grey">Aucun tag pour le moment.</span>
          </span>
        </div>
      {{end}}
    </div>
  </div>

  <!-- Formulaire d'ajout de tag -->
  <div class="box">
    <h3 class="subtitle is-5 mb-3">Ajouter un tag</h3>
    <form id="add-tag-form" action="/tags" method="POST">
      <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
      <div class="field has-addons">
        <div class="control is-expanded">
          <input id="tag-input" 
                 class="input" 
                 type="text" 
                 name="tag" 
                 placeholder='{{index .t "Admin.Tags.Placeholder"}}' 
                 required
                 minlength="1"
                 maxlength="50"
                 pattern="[a-zA-Z0-9_-]+"
                 title="Le nom du tag ne peut contenir que des lettres, chiffres, tirets et underscores">
        </div>
        <div class="control">
          <button type="submit" class="button is-primary">
            <span class="icon"><i class="fas fa-plus"></i></span>
            <span>{{index .t "Common.Add"}}</span>
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
{{end}}
