{{define "tags"}}
<div class="container mt-4">
  <div class="notification is-light">{{index .t "Admin.Tags.Description"}}</div>

  <!-- Liste des tags -->
  <div class="card">
    <header class="card-header is-align-items-center">
      <p class="card-header-title">
        <span class="icon"><i class="fas fa-tags"></i></span>&nbsp;{{index .t "Admin.Tags.Title"}}
      </p>
    </header>
    <div class="card-content">
    <div id="tags-list" class="is-flex is-flex-wrap-wrap">
      {{if .Tags}}
        {{range .Tags}}
          <div class="tag-container mr-3 mb-3">
            <span class="tag is-rounded is-medium has-text-weight-semibold {{if eq . "pvmss"}}is-primary{{else}}is-info{{end}}">
              {{.}}
              {{if eq . "pvmss"}}
                <span class="icon is-small ml-1">
                  <i class="fas fa-lock"></i>
                </span>
              {{else}}
                <form action="/tags/delete" method="POST" class="is-inline">
                  <input type="hidden" name="csrf_token" value="{{$.CSRFToken}}">
                  <input type="hidden" name="tag" value="{{.}}">
                  <button type="submit" class="delete is-small ml-2" aria-label="{{index $.t "Common.Delete"}} {{.}}"></button>
                </form>
              {{end}}
            </span>
          </div>
        {{end}}
      {{else}}
        <div class="notification is-light is-flex is-align-items-center is-fullwidth">
          <span class="icon-text">
            <span class="icon has-text-grey">
              <i class="fas fa-info-circle"></i>
            </span>
            <span class="has-text-grey">Aucun tag pour le moment.</span>
          </span>
        </div>
      {{end}}
    </div>
    </div>
  </div>

  <!-- Formulaire d'ajout de tag -->
  <div class="card mt-4">
    <header class="card-header is-align-items-center">
      <p class="card-header-title">
        <span class="icon"><i class="fas fa-plus"></i></span>&nbsp;Ajouter un tag
      </p>
    </header>
    <div class="card-content">
    <form id="add-tag-form" action="/tags" method="POST">
      <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
      <div class="field has-addons">
        <div class="control is-expanded">
          <input id="tag-input" 
                 class="input" 
                 type="text" 
                 name="tag" 
                 placeholder='{{index .t "Admin.Tags.Placeholder"}}' 
                 required
                 minlength="1"
                 maxlength="50"
                 pattern="[a-zA-Z0-9_-]+"
                 title="Le nom du tag ne peut contenir que des lettres, chiffres, tirets et underscores">
        </div>
        <div class="control">
          <button type="submit" class="button is-primary">
            <span class="icon"><i class="fas fa-plus"></i></span>
            <span>{{index .t "Common.Add"}}</span>
          </button>
        </div>
      </div>
    </form>
    </div>
  </div>
</div>
{{end}}
