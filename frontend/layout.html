{{define "layout"}}
<!DOCTYPE html>
<html lang="{{.Lang}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="{{index .t "UI.Header"}} - {{index .t "UI.Subtitle"}}">
    <meta name="csrf-token" content="{{.CSRFToken}}">
    <title>
        {{- if .Title -}}
            {{.Title}} - {{index .t "UI.Header"}}
        {{- else if .TitleKey -}}
            {{index .t .TitleKey}} - {{index .t "UI.Header"}}
        {{- else -}}
            {{index .t "UI.Header"}}
        {{- end -}}
    </title>
    <link rel="stylesheet" href="/css/bulma.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="/css/fontawesome.min.css">
    <link rel="stylesheet" href="/css/solid.min.css">
    <link rel="stylesheet" href="/css/regular.min.css">
    <link rel="stylesheet" href="/css/brands.min.css">
</head>
<body>
    
    {{template "navbar" .}}

    {{/* Proxmox Connection Status Banner - Server-side rendered */}}
    {{if not .ProxmoxConnected}}
    <div class="notification is-danger is-light" id="proxmox-status-banner" style="margin-bottom: 0; border-radius: 0;">
        <div class="container">
            <div class="level is-mobile">
                <div class="level-left">
                    <div class="level-item">
                        <span class="icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </span>
                    </div>
                    <div class="level-item status-text">
                        <strong>{{index .t "Proxmox.ConnectionError"}} : </strong> 
                        {{if .ProxmoxError}}
                            {{.ProxmoxError}}
                        {{else}}
                            {{index .t "Proxmox.NotConnected"}} {{index .t "Proxmox.Proxmox.NotConnectedMessage"}}
                        {{end}}
                    </div>
                </div>
                <div class="level-right">
                    <button class="delete" onclick="this.parentElement.parentElement.parentElement.style.display='none';"></button>
                </div>
            </div>
        </div>
    </div>
    {{end}}

    <main id="main-content" class="section">
        <div class="container">
            {{if .Content}}
                {{.Content}}
            {{else}}
                {{/* Default content if no content template is defined */}}
                <h1 class="title">{{index .t "UI.Header"}}</h1>
                <p>No content available</p>
            {{end}}
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="content has-text-centered">
                <p>
                    <span class="icon-text">
                        <span class="icon">
                            <i class="fas fa-server"></i>
                        </span>
                        <span>{{index .t "UI.Footer"}}</span>
                    </span>
                </p>
            </div>
        </div>
    </footer>

    <script>
        // Gestion du menu burger
        document.addEventListener('DOMContentLoaded', function() {
            const burger = document.querySelector('.navbar-burger');
            const menu = document.querySelector('.navbar-menu');
            
            if (burger && menu) {
                burger.addEventListener('click', function() {
                    burger.classList.toggle('is-active');
                    menu.classList.toggle('is-active');
                });
            }
        });
    </script>
</body>
</html>
{{end}}