{{define "navbar"}}
<nav class="navbar is-fixed-top is-spaced has-shadow" role="navigation" aria-label="main navigation">
    <div class="container">
        <!-- CSS-only navbar toggle control -->
        <input type="checkbox" id="nav-toggle" class="visually-hidden-checkbox" aria-label="Toggle navigation">
        <div class="navbar-brand">
            <a class="navbar-item" href="/?lang={{.Lang}}">
                <span class="has-text-weight-bold">{{T "UI.Header"}}</span>
            </a>
            <label for="nav-toggle" class="navbar-burger burger" data-target="navbarMenu" role="button" aria-label="menu" aria-expanded="false">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </label>
        </div>

        <div id="navbarMenu" class="navbar-menu">
            <div class="navbar-start">
                <a class="navbar-item {{if eq (currentPath) "/"}}is-active{{end}}" href="/?lang={{.Lang}}" {{if eq (currentPath) "/"}}aria-current="page"{{end}}>
                    <span class="icon-text">
                        <span class="icon">
                            <i class="fas fa-home"></i>
                        </span>
                        <span>{{T "Navbar.Home"}}</span>
                    </span>
                </a>
                <a class="navbar-item {{if eq (currentPath) "/vm/create"}}is-active{{end}} {{if not .ProxmoxConnected}}is-disabled{{end}}" href="/vm/create?lang={{.Lang}}"
                   {{if eq (currentPath) "/vm/create"}}aria-current="page"{{end}}
                   {{if not .ProxmoxConnected}}aria-disabled="true" tabindex="-1" title="Proxmox server is not available"{{end}}>
                    <span class="icon-text">
                        <span class="icon">
                            <i class="fas fa-plus-square"></i>
                        </span>
                        <span>{{T "Navbar.CreateVM"}}</span>
                        {{if not .ProxmoxConnected}}
                        <span class="icon has-text-danger ml-1">
                            <i class="fas fa-exclamation-triangle"></i>
                        </span>
                        {{end}}
                    </span>
                </a>
                <a class="navbar-item {{if eq (currentPath) "/search"}}is-active{{end}} {{if not .ProxmoxConnected}}is-disabled{{end}}" href="/search?lang={{.Lang}}"
                   {{if eq (currentPath) "/search"}}aria-current="page"{{end}}
                   {{if not .ProxmoxConnected}}aria-disabled="true" tabindex="-1" title="Proxmox server is not available"{{end}}>
                    <span class="icon-text">
                        <span class="icon">
                            <i class="fas fa-search"></i>
                        </span>
                        <span>{{T "Navbar.SearchVM"}}</span>
                        {{if not .ProxmoxConnected}}
                        <span class="icon has-text-danger ml-1">
                            <i class="fas fa-exclamation-triangle"></i>
                        </span>
                        {{end}}
                    </span>
                </a>
                <a class="navbar-item {{if eq (currentPath) "/docs/user"}}is-active{{end}}" href="/docs/user?lang={{.Lang}}" {{if eq (currentPath) "/docs/user"}}aria-current="page"{{end}}>
                    <span class="icon-text">
                        <span class="icon">
                            <i class="fas fa-book"></i>
                        </span>
                        <span>{{T "Navbar.Documentation"}}</span>
                    </span>
                </a>
            </div>

            <div class="navbar-end">
                <div class="navbar-item">
                    <div class="buttons are-small">
                        {{if .IsAuthenticated}}
                        {{if .IsAdmin}}
                        <a class="button is-primary" href="/admin/nodes?lang={{.Lang}}">
                            <span class="icon">
                                <i class="fas fa-cog"></i>
                            </span>
                            <span>{{T "Navbar.Admin"}}</span>
                        </a>
                        {{end}}
                        <div class="navbar-item is-hidden-mobile">
                            <div class="is-flex is-align-items-center is-justify-content-center">
                                <span class="has-text-grey is-size-7 mr-2"><icon class="fas fa-user"></icon> {{.Username}}</span>
                                <a href="/logout?lang={{.Lang}}" class="button is-small is-danger is-light">
                                    <span class="icon is-small">
                                        <i class="fas fa-sign-out-alt"></i>
                                    </span>
                                    <span>{{T "Navbar.Logout"}}</span>
                                </a>
                            </div>
                        </div>
                        {{else}}
                        <a class="button is-primary" href="/login?lang={{.Lang}}">
                            <span class="icon">
                                <i class="fas fa-sign-in-alt"></i>
                            </span>
                            <span>{{T "Navbar.Login"}}</span>
                        </a>
                        {{end}}

                        <a class="button is-light" href="/theme/toggle?return={{.CurrentURL}}" title="Toggle theme" aria-label="Toggle theme">
                            <span class="icon">
                                {{if .IsDark}}
                                <i class="fas fa-sun"></i>
                                {{else}}
                                <i class="fas fa-moon"></i>
                                {{end}}
                            </span>
                        </a>

                        <div class="buttons has-addons language-buttons" role="group" aria-label="Language">
                            <a href="{{urlWithLang "fr"}}" hreflang="fr" class="button {{if eq .Lang "fr"}}is-selected{{else}}is-light{{end}}"
                                title="FranÃ§ais" {{if eq .Lang "fr"}}aria-current="true"{{end}}>
                                FR ðŸ‡«ðŸ‡·
                            </a>
                            <a href="{{urlWithLang "en"}}" hreflang="en" class="button {{if eq .Lang "en"}}is-selected{{else}}is-light{{end}}"
                                title="English" {{if eq .Lang "en"}}aria-current="true"{{end}}>
                                EN ðŸ‡¬ðŸ‡§
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</nav>
{{end}}